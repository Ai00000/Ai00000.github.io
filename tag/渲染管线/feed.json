{
    "version": "https://jsonfeed.org/version/1",
    "title": "指尖小屋 • All posts by \"渲染管线\" tag",
    "description": "学习的过程大概就是学了忘,忘了学，抽空多停下来总结，不要冲的太前。",
    "home_page_url": "https://www.fasty97.top",
    "items": [
        {
            "id": "https://www.fasty97.top/2022/06/08/URP%E4%B8%8B%E8%87%AA%E5%AE%9A%E4%B9%89%E5%90%8E%E5%A4%84%E7%90%86/",
            "url": "https://www.fasty97.top/2022/06/08/URP%E4%B8%8B%E8%87%AA%E5%AE%9A%E4%B9%89%E5%90%8E%E5%A4%84%E7%90%86/",
            "title": "URP下自定义后处理",
            "date_published": "2022-06-08T07:05:23.000Z",
            "content_html": "<h2 id=\"说明\"><a class=\"markdownIt-Anchor\" href=\"#说明\">#</a> 说明</h2>\n<blockquote>\n<p>在 URP 中 Unity 通过定义 <code>RenderFeature</code>  来编写自定义后处理效果，实现 <code>SRP渲染管线</code> 。</p>\n</blockquote>\n<pre>Error: Evaluation failed: TypeError: Cannot read property 'initialize' of undefined\n    at __puppeteer_evaluation_script__:3:32</pre><center>流程如上</center>\n<h2 id=\"step1-编写后处理shader\"><a class=\"markdownIt-Anchor\" href=\"#step1-编写后处理shader\">#</a> Step1 编写后处理 Shader</h2>\n<h2 id=\"setp2-编写render-feature\"><a class=\"markdownIt-Anchor\" href=\"#setp2-编写render-feature\">#</a> Setp2 编写 Render Feature</h2>\n<h3 id=\"render-feature\"><a class=\"markdownIt-Anchor\" href=\"#render-feature\">#</a> Render Feature</h3>\n<blockquote>\n<p>Render Feature 是一个处理集，继承自 <code>ScriptableRendererFeature</code> ，可以包含多个 Render Pass。</p>\n</blockquote>\n<p><code>public override void Create()</code></p>\n<p>用于在 RenderFeature 创建时调用，一般在这里进行使用到的 RenderPass 的初始化操作。</p>\n<p><code>public override void AddRenderPasses(ScriptableRenderer renderer, ref RenderingData renderingData)</code></p>\n<p>用于指定渲染队列信息，通过 <code>renderer.EnqueuePass(renderpass)</code>  方法来将 renderpass 加入渲染队列。</p>\n<h3 id=\"render-pass\"><a class=\"markdownIt-Anchor\" href=\"#render-pass\">#</a> Render Pass</h3>\n<blockquote>\n<p>RenderPass 类似于 ShaderPass，是一块处理单元，通过继承 <code>ScriptableRenderPass</code> , 实现生命周期和处理行为。</p>\n</blockquote>\n<center>按照生命周期流程如下</center>\n<pre>Error: Evaluation failed: TypeError: Cannot read property 'initialize' of undefined\n    at __puppeteer_evaluation_script__:3:32</pre><ul>\n<li>\n<p><code>public override void OnCameraSetup(CommandBuffer cmd, ref RenderingData renderingData)</code></p>\n<p>用于初始化 RenderPass，完成基础操作。</p>\n</li>\n<li>\n<p><code>public override void Execute(ScriptableRenderContext context, ref RenderingData renderingData)</code></p>\n<p>用于处理 Pass 逻辑。</p>\n</li>\n<li>\n<p><code>public override void OnCameraCleanup(CommandBuffer cmd)</code></p>\n<p>用于进行收尾操作，释放资源等。</p>\n</li>\n</ul>\n<h2 id=\"setp3-编写volume-component\"><a class=\"markdownIt-Anchor\" href=\"#setp3-编写volume-component\">#</a> Setp3 编写 Volume Component</h2>\n<p>创建一个类继承自 <code>VolumeComponent</code> , 实现 <code>IPostProcessComponent</code>  接口。</p>\n<p>定义 <code>VolumeComponentMenu</code>  菜单路径。</p>\n<figure class=\"highlight csharp\"><figcaption data-lang=\"C#\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">Serializable</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">VolumeComponentMenu</span><span class=\"token attribute-arguments\"><span class=\"token punctuation\">(</span><span class=\"token string\">\"MyPost-processing/Translation\"</span><span class=\"token punctuation\">)</span></span></span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TranslationEffect</span> <span class=\"token punctuation\">:</span> <span class=\"token type-list\"><span class=\"token class-name\">VolumeComponent</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IPostProcessComponent</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">Range</span><span class=\"token attribute-arguments\"><span class=\"token punctuation\">(</span><span class=\"token number\">0.0f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1f</span><span class=\"token punctuation\">)</span></span></span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">public</span> <span class=\"token class-name\">FloatParameter</span> width <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">FloatParameter</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.5f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">Range</span><span class=\"token attribute-arguments\"><span class=\"token punctuation\">(</span><span class=\"token number\">0.0f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1f</span><span class=\"token punctuation\">)</span></span></span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">public</span> <span class=\"token class-name\">FloatParameter</span> height <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">FloatParameter</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.5f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">Range</span><span class=\"token attribute-arguments\"><span class=\"token punctuation\">(</span><span class=\"token number\">0.0f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1f</span><span class=\"token punctuation\">)</span></span></span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">public</span> <span class=\"token class-name\">FloatParameter</span> scale <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">FloatParameter</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.5f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Vector2Parameter</span> viewport<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">Vector2Parameter</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">Vector2</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.5f</span><span class=\"token punctuation\">,</span><span class=\"token number\">0.5f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">bool</span></span> <span class=\"token function\">IsActive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">return</span> scale<span class=\"token punctuation\">.</span><span class=\"token keyword\">value</span> <span class=\"token operator\">>=</span> <span class=\"token number\">0f</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">bool</span></span> <span class=\"token function\">IsTileCompatible</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><blockquote>\n<p>PS：书写参数时，必须使用经过保证的参数类型，如 Float 应该使用 FloatParameter 类型代替。</p>\n</blockquote>\n<h2 id=\"setp4-编写控制脚本\"><a class=\"markdownIt-Anchor\" href=\"#setp4-编写控制脚本\">#</a> Setp4 编写控制脚本</h2>\n<h2 id=\"参考资料\"><a class=\"markdownIt-Anchor\" href=\"#参考资料\">#</a> 参考资料</h2>\n<ol>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMU5rNHkxbzd3SD9zcG1faWRfZnJvbT0zMzMuOTk5LjAuMA==\">【鸡丝菌的 ShaderGraph 小教室】动物森友会转场效果的实现_哔哩哔哩_bilibili</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLnVuaXR5M2QuY29tL1NjcmlwdFJlZmVyZW5jZS9SZW5kZXJpbmcuU2NyaXB0YWJsZVJlbmRlckNvbnRleHQuaHRtbA==\">Unity - Scripting API: ScriptableRenderContext (unity3d.com)</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC80MDA4NTgxMjE=\">URP 自定义后处理 - 知乎 (zhihu.com)</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8xNjE2NTgzNDk=\">如何扩展 Unity URP 的后处理 Volume 组件 - 知乎 (zhihu.com)</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8zNzMyNzMzOTA=\">URP 系列教程 | 如何使用 Scriptable Renderer Feature 来自定义后处理效果 - 知乎 (zhihu.com)</span></li>\n</ol>\n",
            "tags": [
                "渲染管线",
                "后处理",
                "可编程渲染管线（SRP）"
            ]
        }
    ]
}