{
    "version": "https://jsonfeed.org/version/1",
    "title": "指尖小屋 • All posts by \"vr/ar/mr\" tag",
    "description": "学习的过程大概就是学了忘,忘了学，抽空多停下来总结，不要冲的太前。",
    "home_page_url": "https://www.fasty97.top",
    "items": [
        {
            "id": "https://www.fasty97.top/2022/08/31/MRTK%20%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/",
            "url": "https://www.fasty97.top/2022/08/31/MRTK%20%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/",
            "title": "MRTK开发记录",
            "date_published": "2022-08-31T05:12:15.000Z",
            "content_html": "<h1 id=\"mrtk-开发记录\"><a class=\"markdownIt-Anchor\" href=\"#mrtk-开发记录\">#</a> MRTK 开发记录</h1>\n<p>MRTK 是微软官方推出的针对 MR ( <code>混合现实</code> ) 开发的一套工具集。</p>\n<p>同时官方提供了一个 MRFT 工具进行相关工具包的管理。</p>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311312682.png\" alt=\"image-20220812095331431\"></p>\n<p>MRTK 的体系架构：</p>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311313036.png\" alt=\"image-20220815105452428\"></p>\n<h2 id=\"mrft\"><a class=\"markdownIt-Anchor\" href=\"#mrft\">#</a> MRFT</h2>\n<p>在选定一个 Unity 项目之后可以使用此工具导入相关的工具。</p>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311313494.png\" alt=\"image-20220812095525069\"></p>\n<blockquote>\n<p>使用此工具其实是通过修改 Unity 的包管理器中的 Json 来管理</p>\n</blockquote>\n<p>我们至少需要安装:</p>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311313477.png\" alt=\"image-20220812104205094\"></p>\n<p>在 Unity2021.x 之后版本我们官方推荐使用 <code>OpenXR</code>  工具来管理。</p>\n<blockquote>\n<p>😄当然我们可以选择性的使用。</p>\n</blockquote>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311313228.png\" alt=\"image-20220812104327280\"></p>\n<h2 id=\"unity设置\"><a class=\"markdownIt-Anchor\" href=\"#unity设置\">#</a> Unity 设置</h2>\n<p><code>Unity版本:2020.3.8f1</code></p>\n<blockquote>\n<p>导入 Unity 项目中后，可以看到如下提示。</p>\n</blockquote>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311313899.png\" alt=\"image-20220812103958699\"></p>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311313019.png\" alt=\"image-20220812165915460\"></p>\n<p>同时我们需要做如下设置：</p>\n<p>切换平台到通用平台：</p>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311313007.png\" alt=\"image-20220812104526170\"></p>\n<p>依据导入的选择设置 XR 相关设置：</p>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311313869.png\" alt=\"image-20220812104933901\"></p>\n<blockquote>\n<p>我这里没有使用 OPen XR 所以没有勾选支持。</p>\n</blockquote>\n<p>可以导入相关的 example 来查看示例：</p>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311313331.png\" alt=\"image-20220812111136533\"></p>\n<blockquote>\n<p>使用上下左右移动视角。鼠标右键按住旋转视角。</p>\n<p>鼠标左键点击。</p>\n</blockquote>\n<p>可以在这里打开相关的打包工具：</p>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311313346.png\" alt=\"image-20220812110738654\"></p>\n<p>可以看到如下所示的打包工具：</p>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311313426.png\" alt=\"image-20220812110816035\"></p>\n<p>默认是打包生成 VS 项目：</p>\n<p>生成的项目是一个使用 c++ 的 Windows UWP 项目。</p>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311313535.png\" alt=\"image-20220812110949329\"></p>\n<p>在设置项目中可以设置要获取的权限。</p>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311313135.png\" alt=\"image-20220812113114132\"></p>\n<blockquote>\n<p>PS: 😿打包的时候务必将画质调到最低，模拟器性能极差。</p>\n</blockquote>\n<h2 id=\"安装hololens2模拟器\"><a class=\"markdownIt-Anchor\" href=\"#安装hololens2模拟器\">#</a> 安装 HoloLens2 模拟器</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLm1pY3Jvc29mdC5jb20vemgtY24vd2luZG93cy9taXhlZC1yZWFsaXR5L2RldmVsb3AvYWR2YW5jZWQtY29uY2VwdHMvdXNpbmctdGhlLWhvbG9sZW5zLWVtdWxhdG9yI2luc3RhbGxpbmctdGhlLWhvbG9sZW5zLWVtdWxhdG9y\">使用 HoloLens 仿真器 - Mixed Reality | Microsoft Docs</span></p>\n<blockquote>\n<p>在使用模拟器之前，还需要打开 Hype-V</p>\n</blockquote>\n<p>安装好之后，会在 Vs 中看到：<img data-src=\"http://pic.fasty97.top/NotePad/202208311313970.png\" alt=\"image-20220812111306982\"></p>\n<p>选择到此设备后启动项目：</p>\n<p>弹出一个黑框：</p>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311314514.png\" alt=\"image-20220812111414847\"></p>\n<p>等待模拟器启动.</p>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311314965.png\" alt=\"image-20220812113600735\"></p>\n<p>按照公司的电脑 i5-8400 32g 1060 的配置，在模拟器下运行 MRTK 的示例场景都是困难的，一打开 CPU 马上占用 100%😢。</p>\n<blockquote>\n<p>后续我自建了一个场景只放了一个 Cube，将所有质量拉到低之后勉强可以运行，还好可以在 Unity 下流畅运行。</p>\n</blockquote>\n<h2 id=\"创建一个新场景\"><a class=\"markdownIt-Anchor\" href=\"#创建一个新场景\">#</a> 创建一个新场景</h2>\n<blockquote>\n<p>MR 场景和我们通常的场景不同，需要特点的摄像机和移动方式。</p>\n<p>MRTK 已经为我们准备好了这些。</p>\n</blockquote>\n<p>创建一个新场景，从选项卡选择 Add to…</p>\n<p>发现左侧面板为我们增加了 3 个对象：</p>\n<ul>\n<li>ToolKit</li>\n<li>MR 玩家空间 - 摄像机</li>\n<li>MR 屏幕内容</li>\n</ul>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311314233.png\" alt=\"image-20220815100722745\"></p>\n<p>此时运行场景：</p>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311314636.gif\" alt=\"\"></p>\n<blockquote>\n<p>可以看到鼠标变成一个小店，而且会有一个能量条类似的东西用于描述当前的程序性能。</p>\n</blockquote>\n<h3 id=\"mixedrealitytoolkit\"><a class=\"markdownIt-Anchor\" href=\"#mixedrealitytoolkit\">#</a> MixedRealityToolkit</h3>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLm1pY3Jvc29mdC5jb20vemgtY24vd2luZG93cy9taXhlZC1yZWFsaXR5L21ydGstdW5pdHkvbXJ0azIvY29uZmlndXJhdGlvbi9taXhlZC1yZWFsaXR5LWNvbmZpZ3VyYXRpb24tZ3VpZGU/dmlldz1tcnRrdW5pdHktMjAyMi0wNQ==\">MRTK2 配置文件配置指南 - MRTK 2 | Microsoft Docs</span></p>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311314143.png\" alt=\"image-20220815101123490\"></p>\n<p>在这里我们可以对 MRTK 进行配置，点击 <code>Copy</code>  可以复制一份配置文件。</p>\n<p>通过修改这个来控制性能面板的开关：</p>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311314036.png\" alt=\"image-20220815103841608\"></p>\n<h2 id=\"ux组件\"><a class=\"markdownIt-Anchor\" href=\"#ux组件\">#</a> UX 组件</h2>\n<blockquote>\n<p>MRTK 为我们提供了一组规范的 UI 组件，通过这些组件我们可以方便的构建出常用的 UX。</p>\n</blockquote>\n<h3 id=\"边界控制\"><a class=\"markdownIt-Anchor\" href=\"#边界控制\">#</a> 边界控制</h3>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLm1pY3Jvc29mdC5jb20vemgtY24vd2luZG93cy9taXhlZC1yZWFsaXR5L21ydGstdW5pdHkvbXJ0azIvZmVhdHVyZXMvdXgtYnVpbGRpbmctYmxvY2tzL2JvdW5kcy1jb250cm9sP3ZpZXc9bXJ0a3VuaXR5LTIwMjItMDU=\">边界控制 - MRTK 2 | Microsoft Docs</span></p>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311314142.png\" alt=\"Bounds control\"></p>\n<blockquote>\n<p>边界控制在我实际使用时发现了很多坑💭</p>\n<ol>\n<li>使用边界控制的物体依赖于 <code>Box Collider</code></li>\n<li>在移动了使用边界组件的物体后，其边界框的绘制位置可能出错，需要手动调用 UpdateBound 更新。</li>\n<li>需要关闭 BoxCollider 才能关闭绘制，设置 Active 有可能无法去除边界框。</li>\n</ol>\n</blockquote>\n<h3 id=\"按钮\"><a class=\"markdownIt-Anchor\" href=\"#按钮\">#</a> 按钮</h3>\n<blockquote>\n<p>有基于碰撞的按钮和基于 UI 的按钮</p>\n</blockquote>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311314706.png\" alt=\"image-20220815140928969\"></p>\n<center>基于物理碰撞的按钮</center>\n<h4 id=\"基于ui的按钮\"><a class=\"markdownIt-Anchor\" href=\"#基于ui的按钮\">#</a> 基于 UI 的按钮</h4>\n<p>创建一个 Canvas，点击按钮转换为 MR 的 Ui Canvas</p>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311314972.png\" alt=\"image-20220815141142436\"></p>\n<p>++ 注意在使用 UnityUi 形式的 button 时，在 HoloLens 实机上需要按下手势，不太方便操作，考虑使用 3D 按钮 ++</p>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202301291520465.png\" alt=\"image-20230129152013229\"></p>\n<p>随后可以不使用 HoloLens 的图集，直接修改 Sprite 为自己要使用的即可：</p>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202301291521714.png\" alt=\"image-20230129152126667\"></p>\n<h4 id=\"让ui支持直接点击\"><a class=\"markdownIt-Anchor\" href=\"#让ui支持直接点击\">#</a> 让 UI 支持直接点击</h4>\n<p>需要添加如下几个组件：</p>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202301301807614.png\" alt=\"image-20230130180717373\"></p>\n<ul>\n<li>组件</li>\n</ul>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202301301808469.png\" alt=\"image-20230130180802422\"></p>\n<p>注意框选的这两个部分：</p>\n<ul>\n<li>Moving Button Visual 用于进行检测按钮 —— 这里使用自己即可</li>\n<li>注意添加 Event 绑定刀 Trigger 中。</li>\n</ul>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202301301808204.png\" alt=\"image-20230130180853141\"></p>\n<h3 id=\"交互\"><a class=\"markdownIt-Anchor\" href=\"#交互\">#</a> 交互</h3>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLm1pY3Jvc29mdC5jb20vemgtY24vd2luZG93cy9taXhlZC1yZWFsaXR5L21ydGstdW5pdHkvbXJ0azIvZmVhdHVyZXMvdXgtYnVpbGRpbmctYmxvY2tzL2ludGVyYWN0YWJsZT92aWV3PW1ydGt1bml0eS0yMDIyLTA1\">可交互 - MRTK 2 | Microsoft Docs</span></p>\n<blockquote>\n<p>添加此脚本为对象增加可交互性，并且可设置交互时的动画或效果变化。</p>\n</blockquote>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311314216.png\" alt=\"image-20220815143319004\"></p>\n<blockquote>\n<p>设置不同行为的状态表现。</p>\n</blockquote>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311314309.png\" alt=\"image-20220815143435847\"></p>\n<h3 id=\"可操作对象\"><a class=\"markdownIt-Anchor\" href=\"#可操作对象\">#</a> 可操作对象</h3>\n<p>对于我们需要控制移动的对象为其添加脚本：</p>\n<blockquote>\n<p>设定使用单手、双手控制对象移动</p>\n</blockquote>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311314471.png\" alt=\"image-20220815155426005\"></p>\n<blockquote>\n<p>PS: 😄我们可以通过指定 HostTransform 来设定以谁作为轴，默认以自身为轴，此时移动时是独立的。</p>\n<ol>\n<li>以父对象为 Host 则移动此对象时，所有以此父对象为 Host 的对象都会移动</li>\n<li>以外部对象为 Host 则移动此对象时，此对象将会绕着 Host.</li>\n</ol>\n</blockquote>\n<p>🎫可以添加约束管理器组件来约束行为表现。</p>\n<blockquote>\n<p>ℹ️此组件同样依赖于 <code>BoxCollider</code> 。</p>\n</blockquote>\n<h3 id=\"约束管理器\"><a class=\"markdownIt-Anchor\" href=\"#约束管理器\">#</a> 约束管理器</h3>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLm1pY3Jvc29mdC5jb20vemgtY24vd2luZG93cy9taXhlZC1yZWFsaXR5L21ydGstdW5pdHkvbXJ0azIvZmVhdHVyZXMvdXgtYnVpbGRpbmctYmxvY2tzL2NvbnN0cmFpbnQtbWFuYWdlcj92aWV3PW1ydGt1bml0eS0yMDIyLTA1\">约束管理器 - MRTK 2 | Microsoft Docs</span></p>\n<blockquote>\n<p>使用约束管理器，可以将一组约束组件应用于转换。 可以考虑使用附加到游戏对象的 <a href=\"https://docs.microsoft.com/zh-CN/dotnet/api/microsoft.mixedreality.toolkit.ui.transformconstraint\"> <code>TransformConstraint</code> </a> 类型的组件。 默认情况下，约束管理器将自动收集附加到游戏对象的所有<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLm1pY3Jvc29mdC5jb20vemgtY24vd2luZG93cy9taXhlZC1yZWFsaXR5L21ydGstdW5pdHkvbXJ0azIvZmVhdHVyZXMvdXgtYnVpbGRpbmctYmxvY2tzL2NvbnN0cmFpbnQtbWFuYWdlcj92aWV3PW1ydGt1bml0eS0yMDIyLTA1I3RyYW5zZm9ybS1jb25zdHJhaW50cw==\">约束组件</span>，并将其应用于已处理的转换。 但是，用户可以选择手动配置应用的约束列表，只允许应用附加约束的一个子集。</p>\n</blockquote>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311314078.png\" alt=\"image-20220815161016632\"></p>\n<h3 id=\"求解器\"><a class=\"markdownIt-Anchor\" href=\"#求解器\">#</a> 求解器</h3>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLm1pY3Jvc29mdC5jb20vemgtY24vd2luZG93cy9taXhlZC1yZWFsaXR5L21ydGstdW5pdHkvbXJ0azIvZmVhdHVyZXMvdXgtYnVpbGRpbmctYmxvY2tzL3NvbHZlcnMvc29sdmVyP3ZpZXc9bXJ0a3VuaXR5LTIwMjItMDU=\">求解器概述 - MRTK 2 | Microsoft Docs</span></p>\n<h4 id=\"orbital\"><a class=\"markdownIt-Anchor\" href=\"#orbital\">#</a> Orbital</h4>\n<p>Orbital 用于保持对象与视线的相对位置。</p>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311315321.gif\" alt=\"\"></p>\n<h4 id=\"follow\"><a class=\"markdownIt-Anchor\" href=\"#follow\">#</a> Follow</h4>\n<p>Follow 用于让某对象跟随视线。</p>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311315967.gif\" alt=\"\"></p>\n<h3 id=\"tooltips\"><a class=\"markdownIt-Anchor\" href=\"#tooltips\">#</a> ToolTips</h3>\n<blockquote>\n<p>在 MRTK 中自制使用 TextMeshPro 当做提示文件会导致边界框组件渲染异常😢，网络上也没有任何相关的资料。所以想要在 MR 中对相关的游戏对象显示 ToolTip 可能只能使用官方的组件。</p>\n</blockquote>\n<p>📖官方的 ToolTips 组件，相比 TextMeshPro 还有一个优点是可以始终面向摄像机或始终面向游戏对象。</p>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311315335.png\" alt=\"image-20220823141857540\"></p>\n<p>添加此组件设定好使用的 Prefab 和要显示的提示内容，有需要可重新指定锚点。</p>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311315826.png\" alt=\"image-20220823142055145\"></p>\n<h2 id=\"皮肤\"><a class=\"markdownIt-Anchor\" href=\"#皮肤\">#</a> 皮肤</h2>\n<p>在 MRTK 中，使用 ScripttableObject 来配置使用的样式。</p>\n<p>例如在边界框组件中在 Visuals 下就可以配置不同的边界框显示样式。</p>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311315774.png\" alt=\"image-20220823101336950\"></p>\n<p>在可交互对象中，也可以配置具体的动画交互表现：</p>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202208311315781.png\" alt=\"image-20220823101508110\"></p>\n<h2 id=\"相关链接\"><a class=\"markdownIt-Anchor\" href=\"#相关链接\">#</a> 相关链接</h2>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLm1pY3Jvc29mdC5jb20vemgtY24vd2luZG93cy9taXhlZC1yZWFsaXR5L21ydGstdW5pdHkvbXJ0azIvP3ZpZXc9bXJ0a3VuaXR5LTIwMjItMDU=\">MRTK2-Unity 开发人员文档 - MRTK 2 | Microsoft Docs</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLm1pY3Jvc29mdC5jb20vemgtY24vZG90bmV0L2FwaS9taWNyb3NvZnQubWl4ZWRyZWFsaXR5LnRvb2xraXQ/dmlldz1taXhlZC1yZWFsaXR5LXRvb2xraXQtdW5pdHktMjAyMC1kb3RuZXQtMi44LjA=\">Microsoft.MixedReality.Toolkit Namespace | Microsoft Docs</span></li>\n</ul>\n",
            "tags": [
                "VR/AR/MR"
            ]
        }
    ]
}