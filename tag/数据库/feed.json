{
    "version": "https://jsonfeed.org/version/1",
    "title": "指尖小屋 • All posts by \"数据库\" tag",
    "description": "学习的过程大概就是学了忘,忘了学，抽空多停下来总结，不要冲的太前。",
    "home_page_url": "https://www.fasty97.top",
    "items": [
        {
            "id": "https://www.fasty97.top/2023/05/10/%E5%9C%A8Unity%E4%BD%BF%E7%94%A8SqlLite/",
            "url": "https://www.fasty97.top/2023/05/10/%E5%9C%A8Unity%E4%BD%BF%E7%94%A8SqlLite/",
            "title": "在Unity使用SqlLite",
            "date_published": "2023-05-10T01:36:00.000Z",
            "content_html": "<h2 id=\"写在前面\"><a class=\"markdownIt-Anchor\" href=\"#写在前面\">#</a> 写在前面</h2>\n<p>在游戏存储中我们可以使用多种方法，json、二进制、xml、csv、excel、或者是文本、自定义格式等等。使用这些的时候我们基本都需要将文件整个读入内存中，那有没有一种办法可以不用将所有数据载入内存呢？</p>\n<p>答案就是 ———— 使用<ins>数据库</ins>。</p>\n<p>数据库的种类很多，大都都服务于网络服务，在单机游戏中使用数据库的话，可以选择 sqllite。</p>\n<h2 id=\"sqllite\"><a class=\"markdownIt-Anchor\" href=\"#sqllite\">#</a> SqlLite</h2>\n<p>sqllite 是一种轻量的文件型数据库，整个数据库只有一个 <code>.db文件</code> 而且其使用范围非常广，支持的平台多，是我们在使用 Unity 开发单机游戏时的好选择。</p>\n<h2 id=\"快速食用\"><a class=\"markdownIt-Anchor\" href=\"#快速食用\">#</a> 快速食用</h2>\n<p>要使用 SqlLite，我们至少需要导入:</p>\n<ul>\n<li>sqllte3.dll</li>\n<li>Mono.Data.Sqllite.dll</li>\n</ul>\n<p>在这里我们额外导入 Dapper 作为 Orm 方便我们对数据进行 curd：</p>\n<ul>\n<li>Dapper.dll</li>\n<li>Dapper.Contrib.dll</li>\n<li>Mono.Data.Sqlite.dll</li>\n</ul>\n<h3 id=\"创建数据表\"><a class=\"markdownIt-Anchor\" href=\"#创建数据表\">#</a> 创建数据表</h3>\n<p>首先我们创建一个数据表的模型类 User 如下：</p>\n<p>在类名上标注表的名称，<ins>这个名称需要和 db 文件中的数据表名称对应</ins>。</p>\n<figure class=\"highlight csharp\"><figcaption data-lang=\"C#\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">using</span> <span class=\"token namespace\">System</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">using</span> <span class=\"token namespace\">Dapper<span class=\"token punctuation\">.</span>Contrib<span class=\"token punctuation\">.</span>Extensions</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">namespace</span> <span class=\"token namespace\">Scenes<span class=\"token punctuation\">.</span>SqlLiteDB<span class=\"token punctuation\">.</span>Tables</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">Table</span><span class=\"token attribute-arguments\"><span class=\"token punctuation\">(</span><span class=\"token string\">\"User\"</span><span class=\"token punctuation\">)</span></span></span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">Serializable</span></span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">Key</span></span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">public</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">int</span></span> id <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">get</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">set</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token class-name\"><span class=\"token keyword\">string</span></span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token class-name\"><span class=\"token keyword\">string</span></span> pass<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token class-name\"><span class=\"token keyword\">int</span></span> age<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token keyword\">override</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">string</span></span> <span class=\"token function\">ToString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token interpolation-string\"><span class=\"token string\">$\"id:</span><span class=\"token interpolation\"><span class=\"token punctuation\">&#123;</span><span class=\"token expression language-csharp\">id</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token string\"> name:</span><span class=\"token interpolation\"><span class=\"token punctuation\">&#123;</span><span class=\"token expression language-csharp\">name</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token string\"> pass:</span><span class=\"token interpolation\"><span class=\"token punctuation\">&#123;</span><span class=\"token expression language-csharp\">pass</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token string\"> age:</span><span class=\"token interpolation\"><span class=\"token punctuation\">&#123;</span><span class=\"token expression language-csharp\">age</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure>",
            "tags": [
                "SqlLite",
                "存储",
                "数据库"
            ]
        }
    ]
}