{
    "version": "https://jsonfeed.org/version/1",
    "title": "指尖小屋 • All posts by \"ui框架\" category",
    "description": "学习的过程大概就是学了忘,忘了学，抽空多停下来总结，不要冲的太前。",
    "home_page_url": "https://www.fasty97.top",
    "items": [
        {
            "id": "https://www.fasty97.top/2023/02/07/MarkLight%E4%BB%A5Xml%E7%BC%96%E5%86%99UI/",
            "url": "https://www.fasty97.top/2023/02/07/MarkLight%E4%BB%A5Xml%E7%BC%96%E5%86%99UI/",
            "title": "MarkLight以XML编写UI",
            "date_published": "2023-02-07T01:51:40.000Z",
            "content_html": "<h2 id=\"写在前面\"><a class=\"markdownIt-Anchor\" href=\"#写在前面\">#</a> 写在前面</h2>\n<blockquote>\n<p>接触过 web 前端的人，应该都知道网页 以 <code>Html+Css+Js</code>  的形式构成，这种高度灵活的方式一直延续至今。当然后续推出了如 <code>Vue</code> 、 <code>Rective</code>  等前端框架和 <code>Thymeleaf</code> 、 <code>Asp</code>  等模板引擎。。。扯远了…</p>\n<p>总之，我们可以借鉴 Web 的做法，使用类似的结构去编写 Unity Ui，如 Unity 的新 UI 系统  <code>UIElement（UiToolkit</code> ）也是这么做的。此文并不想介绍 UIElement，因为通过作者实际使用体验来说，UIElement 还有很多路要走，可能在制作编辑器领域可以打破原先 Gui 的桎梏，然而在运行时下的 UI，MarkLight 则舒服许多。</p>\n</blockquote>\n<h2 id=\"关于marklight\"><a class=\"markdownIt-Anchor\" href=\"#关于marklight\">#</a> 关于 MarkLight</h2>\n<p>在 Ui 框架的领域中一直流行 MVVM 的设计，M 模型 V 视图 VM 视图模型 通过三者的配合，可以将表现层与逻辑层相分离，有利于解除耦合。MarkLight 同样是使用了这一套设计方案，通过 Xml 文件编写 View, 配合 ViewModel 的 C# 文件进行控制。同时吸纳了 Html 的优点，使用类 Css 的 Xml 文件可以对控件进行统一的样式配置，这让换肤和界面规范统一变得十分容易。</p>\n<h2 id=\"快速食用\"><a class=\"markdownIt-Anchor\" href=\"#快速食用\">#</a> 快速食用</h2>\n<p>首先我们可以通过包管理器或者其他方式，将 MarkLight 导入项目中。</p>\n<p>此时我们创建如下文件夹：</p>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202302071005066.png\" alt=\"image-20230207100516762\"></p>\n<table>\n<thead>\n<tr>\n<th>Resources</th>\n<th>存放所有的图片、音效等资源</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>ViewModels</td>\n<td>存放所有的 View 对应的 ViewModel</td>\n</tr>\n<tr>\n<td>View</td>\n<td>存放所有的 UI 元素</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"创建一个视图view\"><a class=\"markdownIt-Anchor\" href=\"#创建一个视图view\">#</a> 创建一个视图 View</h3>\n<blockquote>\n<p>右键 -&gt;Create-&gt;View 创建一个名为 MainMenu 的 xml</p>\n</blockquote>\n<p>给新创建的 Xml，写入如下内容：</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>MainMenu</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Region</span> <span class=\"token attr-name\">Width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>25%<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Alignment</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Left<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">BackgroundColor</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#353535<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Group</span> <span class=\"token attr-name\">Spacing</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10px<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Button</span> <span class=\"token attr-name\">Text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Play<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Click</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Play<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Button</span> <span class=\"token attr-name\">Text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Options<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Click</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Options<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Button</span> <span class=\"token attr-name\">Id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>btn<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Quit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Click</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Quit<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Button</span> <span class=\"token attr-name\">Text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>测试<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Click</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Test<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Group</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Region</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Region</span> <span class=\"token attr-name\">Width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>75%<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Alignment</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Right<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">BackgroundColor</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#949494<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Region</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>MainMenu</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><blockquote>\n<p>右键 -&gt;Create-&gt;View 创建一个名为 MainMenuScene 的 xml 作为根 Ui</p>\n</blockquote>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>MainMenuScene</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>UserInterface</span> <span class=\"token attr-name\">Width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1024<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>768<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>MainMenu</span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>UserInterface</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>EventSystem</span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>MainMenuScene</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><blockquote>\n<p>创建一个空物体改名 <code>UIRoot</code>  并为其添加如下脚本，设置 MainView 为 MainMenuScene，Default Theme 为 Flat。</p>\n</blockquote>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202302071026717.png\" alt=\"image-20230207102610139\"></p>\n<p>此时你将会看到场景中多了 UI，并且在 UIRoot 下生成了许多子物体。</p>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202302071029753.png\" alt=\"image-20230207102854443\"></p>\n<p><img data-src=\"http://pic.fasty97.top/NotePad/202302071030826.png\" alt=\"\"></p>\n<h3 id=\"绑定viewmodel\"><a class=\"markdownIt-Anchor\" href=\"#绑定viewmodel\">#</a> 绑定 ViewModel</h3>\n<blockquote>\n<p>在 ViewModels 文件夹下创建一个 MainMenu.cs 文件</p>\n</blockquote>\n<figure class=\"highlight csharp\"><figcaption data-lang=\"C#\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainMenu</span><span class=\"token punctuation\">:</span> <span class=\"token type-list\"><span class=\"token class-name\">UIView</span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">Play</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Play\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">Options</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Options\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">Quit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Quit\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>在其中添加方法可以绑定到 Button 的 Click 事件。</p>\n<p>++ PS：在 MarkLight 中使用名称强相关进行绑定，所以所有的文件名、方法名都需要一致。 ++</p>\n",
            "tags": [
                "XML"
            ]
        }
    ]
}