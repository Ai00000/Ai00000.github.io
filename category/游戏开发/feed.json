{
    "version": "https://jsonfeed.org/version/1",
    "title": "指尖小屋 • All posts by \"游戏开发\" category",
    "description": "实现你的游戏梦",
    "home_page_url": "http://www.fasty97.top",
    "items": [
        {
            "id": "http://www.fasty97.top/2020/04/28/Ink%E5%89%A7%E6%83%85%E7%BC%96%E6%8E%92/",
            "url": "http://www.fasty97.top/2020/04/28/Ink%E5%89%A7%E6%83%85%E7%BC%96%E6%8E%92/",
            "title": "Ink剧情编排",
            "date_published": "2020-04-28T13:54:55.000Z",
            "content_html": "<h3 id=\"快速食用\"><a class=\"markdownIt-Anchor\" href=\"#快速食用\">#</a> 快速食用</h3>\n<ol>\n<li>下载 inky 编辑器</li>\n<li>编写 ink 文件</li>\n<li>下载安装 unity 支持</li>\n<li>找到 ink 示例，将对应的 ink 生成的 json 导入运行游戏即可。</li>\n</ol>\n<h3 id=\"unity使用流程\"><a class=\"markdownIt-Anchor\" href=\"#unity使用流程\">#</a> unity 使用流程</h3>\n<p>在 unity 中，我们需要通过代码来驱动我们的剧情的进行。</p>\n<ol>\n<li>\n<p>首先我们需要 <code>创建至少2种Prefab</code> ，一种表示文字，一种表示按钮。</p>\n</li>\n<li>\n<p>然后我们需要创建一个 story 对象，载入对应的 json 文件<br>\n <code>story = new Story (inkJSONAsset.text);</code></p>\n</li>\n<li>\n<p>判断 story 能否继续，若能继续使用代码创建对应的游戏对象</p>\n</li>\n</ol>\n<figure class=\"highlight csharp\"><figcaption data-lang=\"C#\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>story<span class=\"token punctuation\">.</span>canContinue<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// Continue gets the next line of the story</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token class-name\"><span class=\"token keyword\">string</span></span> text <span class=\"token operator\">=</span> story<span class=\"token punctuation\">.</span>Continue <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// This removes any white space from the text.</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>text <span class=\"token operator\">=</span> text<span class=\"token punctuation\">.</span><span class=\"token function\">Trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">// Display the text on screen!</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token function\">CreateContentView</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">// Display all the choices, if there are any!</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>story<span class=\"token punctuation\">.</span>currentChoices<span class=\"token punctuation\">.</span>Count <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token keyword\">int</span></span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> story<span class=\"token punctuation\">.</span>currentChoices<span class=\"token punctuation\">.</span>Count<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>\t\t<span class=\"token class-name\">Choice</span> choice <span class=\"token operator\">=</span> story<span class=\"token punctuation\">.</span>currentChoices <span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>\t\t<span class=\"token class-name\">Button</span> button <span class=\"token operator\">=</span> CreateChoiceView <span class=\"token punctuation\">(</span>choice<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">.</span>Trim <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>\t\t<span class=\"token comment\">// Tell the button what to do when we press it</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>\t\tbutton<span class=\"token punctuation\">.</span>onClick<span class=\"token punctuation\">.</span>AddListener <span class=\"token punctuation\">(</span><span class=\"token keyword\">delegate</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>\t\t\tOnClickChoiceButton <span class=\"token punctuation\">(</span>choice<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>\t\t<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>\t<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\">// If we've read all the content and there's no choices, the story is finished!</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>\t<span class=\"token class-name\">Button</span> choice <span class=\"token operator\">=</span> <span class=\"token function\">CreateChoiceView</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"End of story.\\nRestart?\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>\tchoice<span class=\"token punctuation\">.</span>onClick<span class=\"token punctuation\">.</span><span class=\"token function\">AddListener</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">delegate</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>\t\t<span class=\"token function\">StartStory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>\t<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><figure class=\"highlight csharp\"><figcaption data-lang=\"C#\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> CreateContentView <span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token keyword\">string</span></span> text<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token class-name\">Text</span> storyText <span class=\"token operator\">=</span> Instantiate <span class=\"token punctuation\">(</span>textPrefab<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token class-name\">Text</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\tstoryText<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> text<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\tstoryText<span class=\"token punctuation\">.</span>transform<span class=\"token punctuation\">.</span>SetParent <span class=\"token punctuation\">(</span>canvas<span class=\"token punctuation\">.</span>transform<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">// Creates a button showing the choice text</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token return-type class-name\">Button</span> CreateChoiceView <span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token keyword\">string</span></span> text<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t<span class=\"token comment\">// Creates the button from a prefab</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t<span class=\"token class-name\">Button</span> choice <span class=\"token operator\">=</span> Instantiate <span class=\"token punctuation\">(</span>buttonPrefab<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token class-name\">Button</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\tchoice<span class=\"token punctuation\">.</span>transform<span class=\"token punctuation\">.</span>SetParent <span class=\"token punctuation\">(</span>canvas<span class=\"token punctuation\">.</span>transform<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>\t<span class=\"token comment\">// Gets the text from the button prefab</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>\t<span class=\"token class-name\">Text</span> choiceText <span class=\"token operator\">=</span> choice<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">GetComponentInChildren</span><span class=\"token generic class-name\"><span class=\"token punctuation\">&lt;</span>Text<span class=\"token punctuation\">></span></span></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>\tchoiceText<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> text<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>\t<span class=\"token comment\">// Make the button expand to fit the text</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>\t<span class=\"token class-name\">HorizontalLayoutGroup</span> layoutGroup <span class=\"token operator\">=</span> choice<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">GetComponent</span> <span class=\"token generic class-name\"><span class=\"token punctuation\">&lt;</span>HorizontalLayoutGroup<span class=\"token punctuation\">></span></span></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>\tlayoutGroup<span class=\"token punctuation\">.</span>childForceExpandHeight <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>\t<span class=\"token keyword\">return</span> choice<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><ol start=\"4\">\n<li>要记得每次显示时清除上一次的显示结果</li>\n</ol>\n<h3 id=\"相关链接\"><a class=\"markdownIt-Anchor\" href=\"#相关链接\">#</a> 相关链接</h3>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuaW5rbGVzdHVkaW9zLmNvbS9pbmsv\">inkle 官网</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2lua2xlL2lua3kvcmVsZWFzZXMvdGFnLzAuMTEuMA==\">inky 编辑器</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9pbmRpZW5vdmEuY29tL3UvYmxpbmR2b2xmL2Jsb2dyZWFkLzIzMjQ5\">相关教程参考 - 基础</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9pbmRpZW5vdmEuY29tL3UvYmxpbmR2b2xmL2Jsb2dyZWFkLzIzMjU3\">相关教程参考 - 高级</span></li>\n</ul>\n",
            "tags": [
                "好物推荐"
            ]
        },
        {
            "id": "http://www.fasty97.top/2020/04/27/YarnSpinner%E5%89%A7%E6%83%85%E7%BC%96%E8%BE%91/",
            "url": "http://www.fasty97.top/2020/04/27/YarnSpinner%E5%89%A7%E6%83%85%E7%BC%96%E8%BE%91/",
            "title": "YarnSpinner剧情编辑",
            "date_published": "2020-04-27T14:49:45.000Z",
            "content_html": "<p>本来说好的每周一更又鸽了…<br>\n 今天来水一期，介绍一款很棒的剧情编排应用  <code>YarnSpinner</code> 。</p>\n<h3 id=\"介绍\"><a class=\"markdownIt-Anchor\" href=\"#介绍\">#</a> 介绍</h3>\n<p><code>YarnSpinner</code>  是一款开源免费的剧情编排应用（或者说是一种用于剧情编排的标记语言）。<br>\n试想我们在开发游戏时，剧情有分支选择，有各种条件检查，如果我们全在代码中去判断和检查不仅繁杂而且非常麻烦，策划学习成本高，耦合性过强。你可能自己想出一套标记语言来表述剧情流程，但自己的力量毕竟是有限的，难免出现一些 bug 和坑。此时，不妨试试这款免费开源，多人共同维护的应用吧。</p>\n<h3 id=\"快速食用\"><a class=\"markdownIt-Anchor\" href=\"#快速食用\">#</a> 快速食用</h3>\n<h4 id=\"代码式编辑\"><a class=\"markdownIt-Anchor\" href=\"#代码式编辑\">#</a> 代码式编辑</h4>\n<p>这里我使用 vscode 作为编辑器，下载一下插件：<br>\n<img data-src=\"https://pic.fasty97.top/blog/20200427/a07bJtR8tRDh.png\" alt=\"扩展\"></p>\n<p>我们先创建一个 <code>.yarn</code>  格式的文件，并写入以下内容：</p>\n<pre><code>title: cc\ntags:\ncolorID: 0\nposition: 1,-22\n---\nFasty97: Hi\nPC: 你好？！\nFasty97: 我又回来了！\nPC: 是忘了什么东西吗？\n===\n\n</code></pre>\n<p>这是一段剧本最基本的格式（一个 yarn 文件至少包含一段剧本）：</p>\n<pre><code>title: cc\ntags:\ncolorID: 0\nposition: 1,-22\n</code></pre>\n<p>以上被称为一个剧本头，表示一段剧本，这些是一些剧本段的基本信息，其中<font color=\"red\">title 必填，position 必填</font>.position 为剧本段的标识符类似于 ID 一样的东西，不要重复。</p>\n<h4 id=\"在unity中使用\"><a class=\"markdownIt-Anchor\" href=\"#在unity中使用\">#</a> 在 unity 中使用</h4>\n<ol>\n<li>下载相关的 unity 支持包（官网有）</li>\n<li>在场景中放入一个 Dialogue 预制体，预制体包含一个默认的设置示例。<br>\n<img data-src=\"https://pic.fasty97.top/blog/20200427/AgJFSizXO2LE.png\" alt=\"\"></li>\n<li>创建一个脚本</li>\n<li>设定好相关的资源和引用</li>\n<li>运行游戏尝试按下空格键吧</li>\n</ol>\n<h4 id=\"脚本设定\"><a class=\"markdownIt-Anchor\" href=\"#脚本设定\">#</a> 脚本设定</h4>\n<figure class=\"highlight csharp\"><figcaption data-lang=\"C#\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">using</span> <span class=\"token namespace\">System</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">using</span> <span class=\"token namespace\">System<span class=\"token punctuation\">.</span>Collections<span class=\"token punctuation\">.</span>Generic</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">using</span> <span class=\"token namespace\">UnityEditorInternal</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">using</span> <span class=\"token namespace\">Yarn<span class=\"token punctuation\">.</span>Unity</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">using</span> <span class=\"token namespace\">UnityEngine</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">using</span> <span class=\"token namespace\">Yarn</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">YarnTest</span> <span class=\"token punctuation\">:</span> <span class=\"token type-list\"><span class=\"token class-name\">MonoBehaviour</span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">DialogueRunner</span> dr<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">YarnProgram</span> scriptToLoad<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">Start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token comment\">// 注入对话资源</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        dr<span class=\"token punctuation\">.</span><span class=\"token function\">Add</span><span class=\"token punctuation\">(</span>scriptToLoad<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">Update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Input<span class=\"token punctuation\">.</span><span class=\"token function\">GetKeyDown</span><span class=\"token punctuation\">(</span>KeyCode<span class=\"token punctuation\">.</span>Space<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"开始对话\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token comment\">// 开始一个对话</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>            dr<span class=\"token punctuation\">.</span><span class=\"token function\">StartDialogue</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cc\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><img data-src=\"https://pic.fasty97.top/blog/20200427/XkItpdgndrM8.gif\" alt=\"默认\"></p>\n<h3 id=\"使用自定义方法\"><a class=\"markdownIt-Anchor\" href=\"#使用自定义方法\">#</a> 使用自定义方法</h3>\n<p>我现在希望我第一次与角色交流时输出前 2 句，之后每次与角色交流只输出最后 2 句，这是一个游戏中常用的机制。但现在我们的对话只是按照流程依次执行，我们希望这个流程应该是能够动态控制的。<br>\n我们修改上面的 yarn 为：</p>\n<pre><code>title: cc\ntags: \ncolorID: 0\nposition: 1,-22\n---\n&lt;&lt;if visited(&quot;cc&quot;) is false&gt;&gt;\n    Fasty97: Hi\n    PC: 你好？！\n&lt;&lt;else&gt;&gt;\n    Fasty97: 我又回来了！\n    PC: 是忘了什么东西吗？\n&lt;&lt;endif&gt;&gt;\n===\n</code></pre>\n<p>可以看到这次我们使用 类似 if 语句的东西？ 这是 yarn 中提供的一种语法模式，在这里我们会执行一个自定义的方法 visted 并将 &quot;cc&quot; 传入方法中，如果返回的结果是 false 就执行下面的语句块。</p>\n<h4 id=\"处理自定义事件\"><a class=\"markdownIt-Anchor\" href=\"#处理自定义事件\">#</a> 处理自定义事件</h4>\n<figure class=\"highlight csharp\"><figcaption data-lang=\"C#\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token class-name\">HashSet<span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">string</span><span class=\"token punctuation\">></span></span> visitedNodes<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">HashSet<span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">string</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    <span class=\"token comment\">// 已使用节点</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">Start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">// 注入对话资源</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    dr<span class=\"token punctuation\">.</span><span class=\"token function\">Add</span><span class=\"token punctuation\">(</span>scriptToLoad<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">// 注入处理方法</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    dr<span class=\"token punctuation\">.</span><span class=\"token function\">AddFunction</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"visited\"</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Value<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></span> parameters<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token class-name\"><span class=\"token keyword\">var</span></span> nodeName <span class=\"token operator\">=</span> parameters<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">return</span> visitedNodes<span class=\"token punctuation\">.</span><span class=\"token function\">Contains</span><span class=\"token punctuation\">(</span>nodeName<span class=\"token punctuation\">.</span>AsString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token comment\">// 绑定事件</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    dr<span class=\"token punctuation\">.</span>onNodeComplete<span class=\"token punctuation\">.</span><span class=\"token function\">AddListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span> visitedNodes<span class=\"token punctuation\">.</span><span class=\"token function\">Add</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>创建一个 HashSet 集合用于存放所有已经被使用过的 node，绑定一个 onNodeComplete 事件，这个事件有系统自动调用，在实现中为集合加入元素。<br>\n然后注入一个方法，第一个参数指定方法名（在 yarn 文件下的名称），第二个参数指定参数个数，第三个参数就是写入一个方法了，在方法中我们检查集合是否已经包含该值返回结果，一个自定义不可重复方法就处理好了。</p>\n<p><img data-src=\"https://pic.fasty97.top/blog/20200427/zqkvGNEMJPMw.gif\" alt=\"visited效果\"></p>\n<p>使用相同的方法你还可以创建各种各样的方法在 yarn 中使用。<br>\n值得注意的是：<br>\n通过源代码我们可以知道，yarn 只支持以下几种数据类型。</p>\n<figure class=\"highlight csharp\"><figcaption data-lang=\"C#\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">case</span> Value<span class=\"token punctuation\">.</span>Type<span class=\"token punctuation\">.</span>Number<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">object</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>NumberValue<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">case</span> Value<span class=\"token punctuation\">.</span>Type<span class=\"token punctuation\">.</span>String<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">object</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>StringValue<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">case</span> Value<span class=\"token punctuation\">.</span>Type<span class=\"token punctuation\">.</span>Bool<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">object</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>BoolValue<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">case</span> Value<span class=\"token punctuation\">.</span>Type<span class=\"token punctuation\">.</span>Null<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">object</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h3 id=\"相关链接\"><a class=\"markdownIt-Anchor\" href=\"#相关链接\">#</a> 相关链接</h3>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly95YXJuc3Bpbm5lci5kZXYv\">YarnSpinner 官网</span><br>\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly95YXJuc3Bpbm5lcnRvb2wuZ2l0aHViLmlvL1lhcm5FZGl0b3Iv\"> YarnSpinner 在线编辑器</span><br>\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL1lhcm5TcGlubmVyVG9vbC9ZYXJuU3Bpbm5lcg==\"> YarnSpinner github</span></p>\n",
            "tags": [
                "好物推荐"
            ]
        },
        {
            "id": "http://www.fasty97.top/2020/04/15/Cinemachine%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/",
            "url": "http://www.fasty97.top/2020/04/15/Cinemachine%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/",
            "title": "Cinemachine的基本使用",
            "date_published": "2020-04-15T10:02:16.000Z",
            "content_html": "<p>Unity 版本：<font color=green>2019.3.6f1</font></p>\n<p><font color=red>长文警告！！！</font></p>\n<blockquote>\n  是否为摄像机脚本困扰？是否为镜头动画烦恼？ Cinemachine 超强插件解决你的问题！\n</blockquote>\n<h3>安装Cinemachine</h3>\n<p>现在 Cinemachine 作者已经投靠 unity 官方了，所以 Cinemachine 也成为了 Unity 的官方插件，我们可以直接在 PackageManager 中下载：<br>\n<img data-src=\"http://pic.fasty97.top/blog/20200210/DBHDdslXchVa.png\" alt=\"\"></p>\n<h3>各类相机简述</h3>\n<p>安装之后我们可以在顶部菜单栏，看到如下的选项：<br>\n<img data-src=\"http://pic.fasty97.top/blog/20200210/gd1H7MDqJgJs.png\" alt=\"\"></p>\n<table>\n<thead>\n<tr>\n  <th>选项</th>\n  <th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n  <td>Virtual Camera</td>\n  <td>虚拟摄像机</td>\n</tr>\n<tr>\n  <td>FreeLook Camera</td>\n  <td>自由相机，可以保证镜头内出现头和身体，及相机的活动范围在目标周围圆柱（曲面的）表面，一般用于第三人称控制器</td>\n</tr>\n<tr>\n  <td>State-driven Camera</td>\n  <td>状态驱动相机。添加虚拟相机列表，可以在不同的相机直接直接实现平滑切换，同时其子相机列表如果没有设置LookAt对象等，会直接使用这个父相机的对象。</td>\n</tr>\n<tr>\n  <td>ClearShot Camera</td>\n  <td>干净镜头相机。类似上一个相机，区别在于这个相机可以通过判断子相机的CinemachineCollider（如果有），看是否相机被场景物体阻碍，切换相机。具体可看其源码注释。</td>\n</tr>\n<tr>\n  <td>Dolly Camera with Track</td>\n  <td>可推拉的轨道相机。通过结合轨道路径，就可以模拟像拍电影般镜头轨道移动。</td>\n</tr>\n<tr>\n  <td>Group Target Camera</td>\n  <td>多目标相机。可以同时设置多个目标。</td>\n</tr>\n</tbody>\n</table>\n<h4>Cinemachine Brain</h4>\n<p>在我们创建任意虚拟相机后，插件会为我们的摄像机添加此组件，此组件是我们虚拟相机的大脑，控制着真实相机的行为。（不可或缺）<br>\n<img data-src=\"http://pic.fasty97.top/blog/20200210/4LQud3dfJPHP.png\" alt=\"\"></p>\n<table>\n<thead>\n<tr>\n  <th>变量名</th>\n  <th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n  <td>Live Camera</td>\n  <td>当前选择的虚拟相机。</td>\n</tr>\n<tr>\n  <td>Live Blend</td>\n  <td>当前的镜头转换名称。</td>\n</tr>\n<tr>\n  <td>Show Debug Text</td>\n  <td>在游戏画面左上角显示调试信息。</td>\n</tr>\n<tr>\n  <td>Show Camera Frustum</td>\n  <td>显示相机的视锥体，相比原来自带的边框，这个会裁切掉不在显示范围内的边线。</td>\n</tr>\n<tr>\n  <td>World Up Override</td>\n  <td>重载世界的向上方向（y轴），虚拟相机是通过这个来判断世界环境。</td>\n</tr>\n<tr>\n  <td>Default Blend</td>\n  <td>默认相机切换模式。</td>\n</tr>\n<tr>\n  <td>Custom Blends</td>\n  <td>自定义相机切换模式。</td>\n</tr>\n<tr>\n  <td>Camera Cut Event</td>\n  <td>相机立即切换时事件。</td>\n</tr>\n<tr>\n  <td>Camera Activated Event</td>\n  <td>相机混合（就是有切换变化，不是Cut时）切换时第一帧事件。</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"virtual-camera\"><a class=\"markdownIt-Anchor\" href=\"#virtual-camera\">#</a> Virtual Camera</h3>\n<p>Cinemacine Virtual Camera 是 Cinemachine 最基本的相机，<br>\n<img data-src=\"https://pic.fasty97.top/blog/20200415/oOMGlgOGXRpo.png\" alt=\"Cinemacine Virtual Camera\"></p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">变量名</th>\n<th style=\"text-align:left\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">Status</td>\n<td style=\"text-align:left\">状态，Live 为正在使用，Standby 为准备使用（没在用，但如果上一级停用了，可能会切换到当前虚拟相机），Disable 为不能用。按 Solo 按钮会让相机切换到这个虚拟相机（包括 Disable）。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Game Window Guides</td>\n<td style=\"text-align:left\">是否在 game 窗口显示辅助</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Save During Play</td>\n<td style=\"text-align:left\">保存游戏中的改变</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">priority</td>\n<td style=\"text-align:left\">虚拟相机的优先级，如果同时有多个虚拟相机，使用优先级最高的。如果多个同等级的，应该是按 Hierarchy 顺序找到第一个虚拟相机。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Lens</td>\n<td style=\"text-align:left\">镜头常用配置。视角区域，最近最远裁切平面， 镜头旋转角度。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Body</td>\n<td style=\"text-align:left\">相机本身。四种：Hard constraint，固定距离，相当于第一人称。 Orbital Transposer：轨迹转换器？似乎是模拟第三人称。 Tracked Dolly，轨道推拉，相机只能在轨道上移动（即使设置了 Follow 对象），需要轨道路径 CinemachinePath。 Transposer，普通的镜头转换。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Aim</td>\n<td style=\"text-align:left\">瞄准设置，有三种：Hard constraint，固定距离，没有任何平滑效果。Composer，有平滑效果的瞄准目标。Group Composer，同时瞄准多个目标。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Noise</td>\n<td style=\"text-align:left\">噪音，用于相机抖动，预设有多种效果，也可以自己建立新效果。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Extension</td>\n<td style=\"text-align:left\">扩展，可以添加诸如相机碰撞器，相机变焦器等</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"timeline\"><a class=\"markdownIt-Anchor\" href=\"#timeline\">#</a> TimeLine</h4>\n<p>在 TimeLine 中实现 2 个镜头间的切换非常容易。<br>\n<img data-src=\"https://pic.fasty97.top/blog/20200415/cfRA1u2z5SND.png\" alt=\"\"><br>\n<img data-src=\"https://pic.fasty97.top/blog/20200415/D0m6KY0DjAHH.gif\" alt=\"\"></p>\n<h3 id=\"freelook\"><a class=\"markdownIt-Anchor\" href=\"#freelook\">#</a> FreeLook</h3>\n<p><img data-src=\"https://pic.fasty97.top/blog/20200415/uFWo9v918gKw.png\" alt=\"FreeLook 相机视野\"><br>\n FreeLook 相机是一个自由相机，类似于第三人称游戏中的相机，可以使用鼠标控制相机的朝向多方向的观察角色；其相机视野像是一个圆柱体，如上图所示。（相机始终会在这个圆柱体的轨道上运动。）<br>\n<img data-src=\"https://pic.fasty97.top/blog/20200415/EMNEzmU0LM9r.gif\" alt=\"FreeLook\"><br>\n 大多数参数与 Virtual Camera 相似，值得注意的是：<br>\n<font color=\"red\">在 FreeLook 相机中需要绑定 顶部，中间，底部三个位置，这三个位置将决定相机的最大视野。</font></p>\n<h3 id=\"blendlist\"><a class=\"markdownIt-Anchor\" href=\"#blendlist\">#</a> BlendList</h3>\n<p>如名字一样他管理的是一个 camera 列表，并将列表内的 camera 做混合到达射线机之间更自然的切换效果。<br>\n<strong>我们可以控制摄像机切换的 缓动函数</strong>。<br>\n值得注意的是：当 BlendList 启用时，其下的摄像机会依次使用最后停留在最后一个摄像机里。</p>\n<h3 id=\"cinemachinestatedrivencamera\"><a class=\"markdownIt-Anchor\" href=\"#cinemachinestatedrivencamera\">#</a> CinemachineStateDrivenCamera</h3>\n<p>这是被动画状态所驱动的虚拟相机管理器，能够在觉得切换动画时，快速的切换该动画应该使用的相机。【注意设置层级和绑定动画控制器】<br>\n<img data-src=\"https://pic.fasty97.top/blog/20200415/OnntsqFJoil7.png\" alt=\"CinemachineStateDrivenCamera\"></p>\n<h3 id=\"clearshoot\"><a class=\"markdownIt-Anchor\" href=\"#clearshoot\">#</a> ClearShoot</h3>\n<p>ClearShoot 也是一个管理器，负责管理一组 camera，他的效果是时刻选择最优的摄像机。在复杂的场景中，我们的角色可能被环境所遮挡，我们需要多个摄像机来处理这种情况。<br>\n如下图所示，我设置了 2 个摄像机，一个在顶部，一个在后方，在角色移动到墙壁后面时，后方的摄像机被遮挡，此时会自动启动顶部摄像机。在角色回到墙壁后面时，顶部摄像机被遮挡，只能切换到后面的摄像机。<br>\n<img data-src=\"https://pic.fasty97.top/blog/20200415/lDRTT3hjBhtH.gif\" alt=\"ClearShoot\"></p>\n<h3 id=\"targetgroup\"><a class=\"markdownIt-Anchor\" href=\"#targetgroup\">#</a> TargetGroup</h3>\n<p><img data-src=\"https://pic.fasty97.top/blog/20200415/ws4uSH9Nvs2O.png\" alt=\"TargetGroup\"><br>\n 目标组管理器，可以让位于目标组管理器中的目标 <code>尽可能</code> 的位于屏幕中。<br>\n在使用目标组管理器时，务必为摄像机设置目标组类型：<br>\n<img data-src=\"https://pic.fasty97.top/blog/20200415/rN7xlXVSamTd.png\" alt=\"\"></p>\n<h3 id=\"mixing\"><a class=\"markdownIt-Anchor\" href=\"#mixing\">#</a> Mixing</h3>\n<p>Mixing 摄像机混合管理器，可以将多个摄像机的信息进行混合按照权重，得到最终的显示画面。<br>\n（通过多相机的焦点处建立坐标系按权重分配偏移）<br>\n<img data-src=\"https://pic.fasty97.top/blog/20200415/mJ0BILNkgXu1.png\" alt=\"Mixing\"></p>\n<h3 id=\"活区和死区\"><a class=\"markdownIt-Anchor\" href=\"#活区和死区\">#</a> 活区和死区</h3>\n<p><img data-src=\"https://pic.fasty97.top/blog/20200415/L2dUgC4hSHQs.png\" alt=\"活区和死区\"></p>\n<ul>\n<li>A 区域为死区（Dead Zone），对象在死区内任意移动 <code>不会改变</code> 摄像机的位置。</li>\n<li>B 区域为活区（Soft Zone），对象在活区时会触发摄像机 <code>缓动</code> ，最终将对象固定在死区。</li>\n<li>C 区域为界外区，对象在界外区活动时，摄像机会 <code>立即</code> 改变位置时，使对象位于活区。</li>\n</ul>\n<h3>本文参考</h3>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0NTUyODg2L2FydGljbGUvZGV0YWlscy83OTM4ODUyNw==\">[1] Unity Cinemachine 插件学习笔记</span><br>\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2tpcml0b1YvYXJ0aWNsZS9kZXRhaWxzLzk2Nzc5NDk3\">[2] 个人笔记】Unity 插件 “Cinemachine”—— 实现尼尔机械纪元运镜设计</span></p>\n<h3 id=\"dolly轨道\"><a class=\"markdownIt-Anchor\" href=\"#dolly轨道\">#</a> Dolly 轨道</h3>\n<p>我们可以创建一个自定义的轨道，将摄像机限制在该轨道上。<br>\n<img data-src=\"https://pic.fasty97.top/blog/20200415/5JS6PFq2vAWt.png\" alt=\"\"><br>\n如图所示我创建了一个圆形轨道，摄像机只能在轨道上运动。</p>\n<h3 id=\"dolly-with-cart轨道\"><a class=\"markdownIt-Anchor\" href=\"#dolly-with-cart轨道\">#</a> Dolly with Cart 轨道</h3>\n<p>让物体沿着轨道运动<br>\n<img data-src=\"https://pic.fasty97.top/blog/20200415/O7FvKn3fSIff.gif\" alt=\"Dolly with Cart轨道\">（这是一个很强大的功能，其实我们不止能用在摄像机上，可以用在任何游戏对象上，让这个对象，或 ui 只能沿着这个轨道运动，并实时设置要达到哪个点，简言之这是一个曲线编辑器。）<br>\n<img data-src=\"https://pic.fasty97.top/blog/20200415/iGxYjFgflcq3.png\" alt=\"\"></p>\n<h3 id=\"总结\"><a class=\"markdownIt-Anchor\" href=\"#总结\">#</a> 总结</h3>\n<p>Cinemachine 是一款非常棒的智能摄像机插件，非常的方便易用。解决大部分的摄像机问题，甚至无需编写代码。当然我们也可以使用代码来控制摄像机，更灵活的处理摄像机与角色之间的关系。</p>\n",
            "tags": [
                "unity"
            ]
        },
        {
            "id": "http://www.fasty97.top/2020/02/10/Timeline%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/",
            "url": "http://www.fasty97.top/2020/02/10/Timeline%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/",
            "title": "Timeline的基本使用",
            "date_published": "2020-02-10T05:53:35.000Z",
            "content_html": "<p>Unity 版本号：<font color=green>2019.3.0f6</font></p>\n<hr />\n<p>TimeLine 是 unity2017 推出的新功能，其采用时间线的形式组合场景资源， 可以用于编排游戏剧情，过场动画，斩杀镜头，人物特写等效果。</p>\n<h3>创建TimeLine</h3>\n<p>用于播放 TimeLine 的物体必须有这个组件：<br>\n<img data-src=\"http://pic.fasty97.top/blog/20200210/CUXzMDxo2tsx.png\" alt=\"组件\"></p>\n<table>\n<thead>\n<tr>\n  <th align=\"center\">参数名</th>\n  <th align=\"center\">作用</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n  <td align=\"center\">Playable</td>\n  <td align=\"center\">Playable资源（TimeLine资源）</td>\n</tr>\n<tr>\n  <td align=\"center\">Update Method</td>\n  <td align=\"center\">更新模式</td>\n</tr>\n<tr>\n  <td align=\"center\">Play On Awake</td>\n  <td align=\"center\">是否启动时自动播放</td>\n</tr>\n<tr>\n  <td align=\"center\">Wrap Mode</td>\n  <td align=\"center\">结束模式，None播放完回到原先属性，Loop循环播放，Hood播放完维持改变</td>\n</tr>\n<tr>\n  <td align=\"center\">Initial Time</td>\n  <td align=\"center\">延迟时间</td>\n</tr>\n</tbody>\n</table>\n<h3>轨道面板</h3>\n<p><img data-src=\"http://pic.fasty97.top/blog/20200210/0l1DQytDcsA2.png\" alt=\"轨道面板\"><br>\n点击左侧的＋，可以添加轨道，这是一个类似视频剪辑的界面，我们可以方便的对轨道进行移动和剪辑。</p>\n<h4>Activation</h4>\n<p>Activation 用于表示物体的激活状态：<br>\n<img data-src=\"http://pic.fasty97.top/blog/20200210/vIzC588mJlSO.gif\" alt=\"Activation\"></p>\n<h4>Animation</h4>\n<p>Animation 用于播放动画，既可以播放已有的动画，也可以自己录制帧动画来使用。<br>\n<strong>注意：使用此轨道的物体会被创建一个 Animator Controller，这个组件不能被删除。</strong><br>\n<img data-src=\"http://pic.fasty97.top/blog/20200210/gizvroAPPTAo.gif\" alt=\"Animation\"></p>\n<h4>Audio</h4>\n<p>Audio 轨道用于播放音效，如果不指定 AudioSource 就无法细致调节效果。<br>\n<img data-src=\"http://pic.fasty97.top/blog/20200210/zEYKWKgDJrlk.png\" alt=\"Audio\"><br>\n 每个轨道在属性面板都有不同的属性，Audio 面板如下：<br>\n!{Audio 属性}(<span class=\"exturl\" data-url=\"aHR0cDovL3BpYy5mYXN0eTk3LnRvcC9ibG9nLzIwMjAwMjEwL0dvRURiN3FiZFNIUi5wbmc=\">http://pic.fasty97.top/blog/20200210/GoEDb7qbdSHR.png</span>)</p>\n<h4>Control</h4>\n<p>Control 轨道和 Activation 轨道有点相似，但不同的是 Control 轨道可以同时控制多个物体的激活状态。<br>\n<img data-src=\"http://pic.fasty97.top/blog/20200210/y5G5Rhig2kPn.png\" alt=\"Control\"></p>\n<h4>Signal-任意轨道</h4>\n<p>Signal 是非常重要的轨道，在使用 TimeLine 时，你可能会有这样的想法，能不能在时间线上，调用我们自定义的方法呢，在 2019 之前可以通过剪辑间接的完成事件的调用；但现在有了 Signal 轨道的加持，我们可以非常方便的在任意时刻调用方法了。<br>\n创建一个简单的测试脚本，并将脚本挂载在游戏物体上。</p>\n<figure class=\"highlight csharp\"><figcaption data-lang=\"C#\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SignalTest</span> <span class=\"token punctuation\">:</span> <span class=\"token type-list\"><span class=\"token class-name\">MonoBehaviour</span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>   <span class=\"token keyword\">public</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">Show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>   <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>      Debug<span class=\"token punctuation\">.</span><span class=\"token function\">Log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Signal!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>   <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>右键单击任意轨道：<br>\n<img data-src=\"http://pic.fasty97.top/blog/20200210/SAiR90ho2iVi.gif\" alt=\"\"><br>\n此时在属性面板中，可以看到：<br>\n<img data-src=\"http://pic.fasty97.top/blog/20200210/rkIgMqVhBiI3.png\" alt=\"\"><br>\n为了监听这个事件，unity 提示我们缺少一个监听器，点击 Add 添加一个。<br>\n添加好监听器，我们需要创建一个监听实例，这个实例是可以复用的。<br>\n<img data-src=\"http://pic.fasty97.top/blog/20200210/fbn8zd2A3rD3.png\" alt=\"\"></p>\n<p>完成以上步骤我们发现原先有警告的小白标变成了<font color=red>白色</font>。这说明我们设置正确了，然后我们需要绑定事件给实例：<br>\n<img data-src=\"http://pic.fasty97.top/blog/20200210/YYCEgJkFVtkl.png\" alt=\"\"><br>\n尝试运行（播放游戏）一下发现在时间轴运行到小白标时会自动调用我们绑定的方法。</p>\n<h3>Signal-指定轨道</h3>\n<p>上面实现的 Signal 是针对于任意轨道来说的，如果我们需要很多的 Signal 处理起来可能会发生混乱，所以官方提供了专门的 Signal 轨道。<br>\n先给我们的物体添加：<br>\n<img data-src=\"http://pic.fasty97.top/blog/20200210/07nzVWaY41Yw.png\" alt=\"\"><br>\n在属性面板中我们可以对事件实例绑定多个方法，统一管理：<br>\n<img data-src=\"http://pic.fasty97.top/blog/20200210/IvGBUJotShrO.png\" alt=\"\"></p>\n<h3>小技巧</h3>\n<p>在轨道左侧可以点击三点，然后选择 Mute（静音）对指定轨道进行屏蔽。<br>\n在右侧轨道面板中，可以通过重叠区块实现 2 个区块之间的过渡效果。<br>\n可设置轨道的淡入淡出效果：<br>\n<img data-src=\"http://pic.fasty97.top/blog/20200210/TKt9DScaWgab.png\" alt=\"\"></p>\n<h3>驱动摄像机</h3>\n<p>做了一个超级丑的摄像机变换效果：<br>\n<img data-src=\"http://pic.fasty97.top/blog/20200210/UVEeBVXqcg7D.gif\" alt=\"\"></p>\n<h3>代码驱动TimeLine</h3>\n<p>有时候我们可能需要通过代码动态的启动 TimeLine，这也很容易实现：</p>\n<figure class=\"highlight csharp\"><figcaption data-lang=\"C#\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Signal</span> <span class=\"token punctuation\">:</span> <span class=\"token type-list\"><span class=\"token class-name\">MonoBehaviour</span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">PlayableDirector</span> playDir<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">Fac</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        Debug<span class=\"token punctuation\">.</span><span class=\"token function\">Log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Fac..\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">Update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Input<span class=\"token punctuation\">.</span><span class=\"token function\">GetKeyDown</span><span class=\"token punctuation\">(</span>KeyCode<span class=\"token punctuation\">.</span>A<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"A\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            playDir<span class=\"token punctuation\">.</span><span class=\"token function\">Play</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure>",
            "tags": [
                "unity"
            ]
        }
    ]
}